{% extends "base.html" %}
{% load static %}

{% block title %}Crear PQRSD enviado{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/radicacion.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
{% endblock %}

{% block content %}
<div class="container-form">
  <div class="card shadow-lg">
    <div class="card-header">
      <h4><i class="fas fa-envelope-open-text"></i> Registrar PQRSD</h4>
    </div>
    <div class="card-body">

      <!-- Mensajes de error -->
      {% if form.errors %}
      <div class="alert alert-danger">
        <strong><i class="fas fa-exclamation-circle"></i> Por favor, corrige los siguientes errores:</strong>
        <ul>
          {% for field, errors in form.errors.items %}
          <li><strong>{{ field }}:</strong> {{ errors.0 }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {{ form.media }}
      <form method="post" id="solicitud-data-form" novalidate>
        {% csrf_token %}

        <!-- ========== SECCIÓN 1: INFORMACIÓN DE INGRESO ========== -->
        <div class="form-section">
          <div class="form-section-title">
            <i class="fas fa-inbox"></i> Información de radicado
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="{{ form.asunto.id_for_label }}">
                <i class="fas fa-envelope"></i> {{ form.asunto.label }}
              </label>
              {{ form.asunto }}
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="{{ form.radicado_asociado.id_for_label }}">
                <i class="fas fa-envelope"></i> {{ form.radicado_asociado.label }}
              </label>
              {{ form.radicado_asociado }}
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="{{ form.destinatario.id_for_label }}">
                <i class="fas fa-envelope"></i> {{ form.destinatario.label }}
              </label>
              {{ form.destinatario }}
            </div>
          </div>
        </div>

      

        <!-- ========== BOTONES DE ACCIÓN ========== -->
        <input type="hidden" name="radicador" value="{{ request.user.id }}">

        <div class="row justify-content-center mt-4 g-3">
          <div class="col-md-4 d-grid">
            <button type="submit" class="btn btn-success btn-lg">
              <i class="fas fa-save"></i> Guardar Registro
            </button>
          </div>

          <div class="col-md-4 d-grid">
            <a href="{% url 'radicacion' %}" class="btn btn-secondary btn-lg">
              <i class="fas fa-arrow-left"></i> Volver
            </a>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>

<script>
  $(document).ready(function () {
    // Activar Select2 en los dropdowns
    $('select').select2({
      width: '100%',
      language: 'es'
    });
    });
</script>

{% endblock %}